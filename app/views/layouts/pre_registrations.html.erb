<!DOCTYPE html>
<html>
<head>
  <title>Tallertest</title>
  <%= stylesheet_link_tag    "application" %>
  <style>
  #firstdiv {
	background-image:url(<%= get_background_url %>);
  } 
  </style>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>

<script>

var backgroundid = 1;
function next_background_image() {
	
	backgroundid++;
	if (backgroundid>4) backgroundid = 1;
	return "/background/0"+backgroundid+".jpg";
}


function rotate_background() {
	var newimage = new Image();
	var newpath = next_background_image();

    newimage.onload = function() {
		var seconddiv = $("#seconddiv");
		var firstdiv = $("#firstdiv");
		seconddiv.css("opacity", 1.0);
		seconddiv.css("background-image", firstdiv.css("background-image"));
	    firstdiv.css("background-image", "url('"+newpath+"')");
		seconddiv.animate({opacity: 0.0}, 3000);
	}
	newimage.src = newpath;
}

window.onload = function() {
	window.setInterval(
		function() {
			rotate_background();
		},
		6000
	)	
}

</script>

<body>
	<div id=firstdiv>
		<div id=seconddiv>
		</div>
	</div>

	<div id=lastdiv>		
	  	<table>
	  	  <tr id=uppertr>
			<div id=uppertrdiv>
			</div>
	  	  </tr>
	  	  <tr id=centertr>
	  	  	<td id=lefttd>
	  	  		<div id=lefttddiv>
	  	  		</div>
	  	  	</td>
	  	  	<td class='icon_td'>
			  <img class='icon_img' src='/images/valija.png'>
			  </img>	
			</td>
			<td id='center_cell'>  	
<%= yield %>

			</td>
	  	  	<td class='icon_td'>
			  <img class='icon_img' src='/images/valija.png'>
			  </img>	
			</td>
	  	  	<td id=righttd>
	  	  		<div id=righttddiv>
	  	  		</div>
	  	  	</td>
		  </tr>
	  	  <tr id=lowertr>
			<div id=lowertrdiv>
			</div>
	  	  </tr>
		</table>
	</div>
</body>
</html>
